# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'sainnhe/tmux-fzf'
#set -g @plugin 'jaclu/tmux-menus'

set -g mouse on
set -g default-terminal "tmux-256color"
# Enable true color (24-bit color) support
set-option -ga terminal-overrides ",xterm-256color:RGB"

set -g renumber-window on
set -wg automatic-rename on
# set -g set-clipboard on

# use ctl-a
unbind C-b
set -g prefix C-a
# Ensure that we can send Ctrl-A to other apps
bind C-a send-prefix

set-option -s focus-events on
set-option -s extended-keys on


# Rebind 'c' to create a new window in the current path
bind c new-window -c "#{pane_current_path}"

# Prefix + r to reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

TMUX_FZF_LAUNCH_KEY="C-f"
TMUX_FZF_OPTIONS="-p -w 80% -h 70% -m --layout=reverse --color=bg+:#2d3f76 \
  --color=bg:#1e2030 \
  --color=border:#589ed7 \
  --color=fg:#c8d3f5 \
  --color=gutter:#1e2030 \
  --color=header:#ff966c \
  --color=hl+:#65bcff \
  --color=hl:#65bcff \
  --color=info:#545c7e \
  --color=label:#545c7e \
  --color=marker:#ff007c \
  --color=pointer:#ff007c \
  --color=prompt:#65bcff \
  --color=query:#c8d3f5:regular \
  --color=scrollbar:#589ed7 \
  --color=separator:#ff966c \
  --color=spinner:#ff007c \
"

# Setting up VIM pane / window managment
setw -g mode-keys vi
unbind %
# When splitting a pane use the current path
bind -r = split-window -h -c "#{pane_current_path}"
bind -r - split-window -v -c "#{pane_current_path}"
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Allow resizing splits
bind -r H resize-pane -L 1
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 1
bind -r C-h resize-pane -L 1
bind -r C-j resize-pane -D 1
bind -r C-k resize-pane -U 1
bind -r C-l resize-pane -R 1

# history and mouse scrolling
set -g history-limit 100000
set -g mouse on
#set -g mouse-select-pane on

# change number for windows and panes
set -g base-index 1
setw -g pane-base-index 1

bind C-p previous-window
bind C-n next-window
#bind -r C-h select-window -t :-
#bind -r C-l select-window -t :+

# --- Catppuccin Mocha Color Palette ---
thm_bg="#1e1e2e"
thm_fg="#cdd6f4"
thm_cyan="#89dceb"
thm_black="#181825"
thm_gray="#313244"
thm_magenta="#cba6f7"
thm_pink="#f5c2e7"
thm_red="#f38ba8"
thm_green="#a6e3a1"
thm_yellow="#f9e2af"
thm_blue="#89b4fa"
thm_orange="#fab387"
thm_black4="#585b70"
thm_mauve="#8839ef"
# thm_mauve="#cba6f7"

# --- General Settings ---
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB" # Enable true color support
set -g mouse on                                  # Enable mouse support
set -g status-position bottom                    # Status bar at the bottom
set -g display-panes-time 3000

# Enable monitoring
setw -g monitor-activity on
setw -g monitor-bell on

# --- Status Bar Appearance ---
set -g status-style "bg=${thm_bg},fg=${thm_fg}"
set -g status-left-length 100
set -g status-right-length 100

# Pane borders
set -g pane-border-indicators arrows
set -g pane-border-lines heavy
set -g pane-border-style "fg=${thm_gray}"
set -g pane-active-border-style "fg=${thm_blue}"

# Message/Command prompt
set -g message-style "fg=${thm_cyan},bg=${thm_gray}"
set -g message-command-style "fg=${thm_cyan},bg=${thm_gray}"

# Clock Mode
setw -g clock-mode-colour "${thm_blue}"

# Pane Numbers shown on Prefix + q
set -g display-panes-active-colour "${thm_magenta}"
set -g display-panes-colour "${thm_blue}"

# --- Window Styling ---

# Enable monitoring for the flags to work
setw -g monitor-activity on
setw -g monitor-bell on

# Unfocused window
# Simple style
# setw -g window-status-style "fg=${thm_orange},bg=${thm_bg}"
# Fancy style
# Check Bell -> Red + ! Icon
# Check Activity -> Green + ~ Icon
# Check Last Window -> • Icon
setw -g window-status-format "#[fg=${thm_orange},bg=${thm_bg}]#{?window_bell_flag,#[fg=${thm_red}]!,#{?window_activity_flag,#[fg=${thm_magenta}]~,#{?window_last_flag,•, }}}#I:#W "

# Focused (current) window
# Orange background, if Zoomed show icon instead of number
setw -g window-status-current-format "#[fg=${thm_bg},bg=${thm_orange},bold] #{?window_zoomed_flag,󰊓 ,#I:}#W "

setw -g window-status-separator ""
setw -g window-status-style "fg=${thm_fg},bg=${thm_bg}"

# --- Status Left/Right Content ---
set -g status-left-length 100
set -g status-right-length 100

# Left: Session name (Changes to mauve when Prefix is active)
set -g status-left "#{?client_prefix,#[fg=${thm_bg} bg=${thm_mauve} bold],#[fg=${thm_bg} bg=${thm_green} bold]}  #S #[fg=default,bg=default]#{?client_prefix,#[fg=${thm_mauve}],#[fg=${thm_green}]}"

# Right: IP and host
set -g status-right "#[fg=${thm_blue},bg=${thm_bg},bold] #(hostname -I | cut -d' ' -f1) "
set -ga status-right "#[fg=${thm_bg},bg=${thm_cyan}] #H "

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
